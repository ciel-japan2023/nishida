<html>

<head>
	<!-- htmlファイルと同じフォルダにあるjQuery.jsを読み込む -->
	<script type="text/javascript" src="../common/jQuery.js"></script>
	<!-- 文字コードをUTF-8に設定（文字化け防止） -->
	<meta charset="UTF-8">
	<!-- タイトル -->
	<title>電卓</title>

	<style>
    	/* ここにCSSを書く */
		input{
			width: 275px;
		}

		button{
			/* width: 15%;
			height: 15%; */
			width: 50px;
			height: 30px;
		}

		#display{
			text-align: right;
		}
	</style>
</head>

<body>
    <!-- ここに画面に表示する内容を書く -->
	<div id="calculator">
		<table>
			<tr>
				<td>
					<input type="text" id="display" readonly />
				</td>
			</tr>
			<tr>
				<td>
					<!-- 戻るボタン -->
					<button id="button_back">▷</button>

					<!-- 7ボタン -->
					<button id="button_7">7</button>

					<!-- 8ボタン -->
					<button id="button_8">8</button>

					<!-- 9ボタン -->
					<button id="button_9">9</button>

					<!-- 割り算ボタン -->
					<button id="button_division">÷</button>
				</td>
			</tr>
			<tr>
				<td>
					<!-- クリアボタン -->
					<button id="button_c">C</button>

					<!-- 4ボタン -->
					<button id="button_4">4</button>

					<!-- 5ボタン -->
					<button id="button_5">5</button>

					<!-- 6ボタン -->
					<button id="button_6">6</button>

					<!-- 掛け算ボタン -->
					<button id="button_multiplication">×</button>
				</td>
			</tr>
			<tr>
				<td>
					<!-- オールクリアボタン -->
					<button id="button_ac">AC</button>

					<!-- 1ボタン -->
					<button id="button_1">1</button>

					<!-- 2ボタン -->
					<button id="button_2">2</button>

					<!-- 3ボタン -->
					<button id="button_3">3</button>

					<!-- 引き算ボタン -->
					<button id="button_subtraction">-</button>
				</td>
			</tr>
			<tr>
				<td>
					<!-- 0ボタン -->
					<button id="button_0">0</button>

					<!-- 00ボタン -->
					<button id="button_00">00</button>

					<!-- ドットボタン -->
					<button id="button_dot">.</button>

					<!-- 計算ボタン -->
					<button id="button_calculation">=</button>

					<!-- 足し算ボタン -->
					<button id="button_addition">+</button>
				</td>
			</tr>
		</table>
	</div>
	
	
	<script>
	    // ここにJavaScriptを書く

		let display="";//文字を表示する変数
		let count=0;//文字数を数える
		let ans=0;
		let num="";
		let countC=0;//比較演算子間のカウント
		let huragu="b";//フラグ処理　数字＝a　比較演算子＋ドット＝ｂ
		// 0ボタン押下時の処理
		$("#button_0").on("click", function(){			
				
				display+="0";
				document.getElementById("display").value = display;//
				huragu="a";
			
			count+=1;//文字数カウント
			countC+=1;//比較演算子間のカウント
		});

		// 00ボタン押下時の処理
		$("#button_00").on("click", function(){

			count+=2;//文字数カウント
			display+="00";
			document.getElementById("display").value = display;//文字を表示
			huragu="a";
			countC+=2;//比較演算子間のカウント
			
		});

		// ドットボタン押下時の処理
		$("#button_dot").on("click", function(){


			if(display.substr( count-1, count )=="/"||display.substr( count-1, count )=="*"||
							display.substr( count-1, count )=="+"||display.substr( count-1, count )=="-"||display.substr( count-1, count )=="."){

			}else if(display.substr(-countC).indexOf(".")!==-1){


			}else if(count==0){
				count=2;//文字数カウント
				countC+=2;//比較演算子間のカウント
				display="0.";
				document.getElementById("display").value = display;//文字を表示	
				huragu="b";
					
			}else if(huragu=="a"){

				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+=".";
				document.getElementById("display").value = display;//文字を表示	
				huragu="b";
			}else if(huragu=="b"){

			
			}
			
		
		
		
		});

		// 1ボタン押下時の処理
		$("#button_1").on("click", function(){

			if( count == 1 && display == "0" ){	
				display="1";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="1";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 2ボタン押下時の処理
		$("#button_2").on("click", function(){

			if( count == 1 && display == "0" ){	
				display="2";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="2";
				document.getElementById("display").value = display;//文字を表示		
			}
			
			huragu="a";
			

		});

		// 3ボタン押下時の処理
		$("#button_3").on("click", function(){

			if( count == 1 && display == "0" ){	
				display="3";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="3";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 4ボタン押下時の処理
		$("#button_4").on("click", function(){

			

			if( count == 1 && display == "0" ){	
				display="4";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="4";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
		
		});

		// 5ボタン押下時の処理
		$("#button_5").on("click", function(){

			

			if( count == 1 && display == "0" ){	
				display="5";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="5";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 6ボタン押下時の処理
		$("#button_6").on("click", function(){

			

			if( count == 1 && display == "0" ){	
				display="6";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="6";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 7ボタン押下時の処理
		$("#button_7").on("click", function(){

			
			if( count == 1 && display == "0" ){	
				display="7";			
				count+=1;//文字数カウン
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="7";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 8ボタン押下時の処理
		$("#button_8").on("click", function(){			

			if( count == 1 && display == "0" ){	
				display="8";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="8";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 9ボタン押下時の処理
		$("#button_9").on("click", function(){
			
			if( count == 1 && display == "0" ){	
				display="9";			
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				document.getElementById("display").value = display;//文字を表示	
			}else{
				count+=1;//文字数カウント
				countC+=1;//比較演算子間のカウント
				display+="9";
				document.getElementById("display").value = display;//文字を表示		
			}

			huragu="a";
			
		});

		// 足し算ボタン押下時の処理
		$("#button_addition").on("click", function(){

			if(huragu=="b"){
				
			}else if(display.substr( count-1, count )=="+"||display.substr( count-1, count )=="-"
						||display.substr( count-1, count )=="*"||display.substr( count-1, count )=="/"||display.substr( count-1, count )=="."){
				
				
			}else if (count==0){
				count=0;//文字数カウン
				countC=0;//比較演算子間のカウント
				display="";
				document.getElementById("display").value = display;//文字を表示		

			}else{
				count+=1;//文字数カウント
				countC=0;//比較演算子間のカウント
				display+="+";
				document.getElementById("display").value = display;//文字を表示
				huragu="b";
		
			}

			
		});

		// 引き算ボタン押下時の処理
		$("#button_subtraction").on("click", function(){

			if(huragu=="b"){


			}else if(display.substr( count-1, count )=="-"||display.substr( count-1, count )=="+"
						||display.substr( count-1, count )=="*"||display.substr( count-1, count )=="/"||display.substr( count-1, count )=="."){
				
			}else if(count==0){
				count=0;//文字数カウント
				countC=0;//比較演算子間のカウント
				display="";
				document.getElementById("display").value = display;//文字を表示	

			}else{
				count+=1;//文字数カウント
				countC=0;//比較演算子間のカウント
				display+="-";
				document.getElementById("display").value = display;//文字を表示
				huragu="b";
			}

			
		});

		// 掛け算ボタン押下時の処理
		$("#button_multiplication").on("click", function(){

			if(huragu=="b"){

			}else if(display.substr( count-1, count )=="*"||display.substr( count-1, count )=="+"
						||display.substr( count-1, count )=="-"||display.substr( count-1, count )=="/"||display.substr( count-1, count )=="."){


			}else if(count==0){
				count=0;//文字数カウント
				countC=0;//比較演算子間のカウント
				display="";
				document.getElementById("display").value = display;//文字を表示		
			}else{
				count+=1;//文字数カウント
				countC=0;//比較演算子間のカウント
				display+="*";
				document.getElementById("display").value = display;//文字を表示
				huragu="b";
			
			}

			
		});

		// 割り算ボタン押下時の処理
		$("#button_division").on("click", function(){

			if(huragu=="b"){

			
			}else if(display.substr( count-1, count )=="/"||display.substr( count-1, count )=="*"||
							display.substr( count-1, count )=="+"||display.substr( count-1, count )=="-"||display.substr( count-1, count )=="."){

			}else if(count==0){
				count=0;//文字数カウント
				countC=0;//比較演算子間のカウント
				display="";
				document.getElementById("display").value = display;//文字を表示		

			}else{
				count+=1;//文字数カウント
				countC=0;//比較演算子間のカウント
				display+="/";
				document.getElementById("display").value = display;//文字を表示
				huragu="b";
			}

			
		});

		// 計算ボタン押下時の処理
		$("#button_calculation").on("click", function(){

			if(huragu=="b"){
			
			}else if(count==0){
				count=0;
				countC=0;//比較演算子間のカウント
				display="";
				huragu="b"
			}else{
				ams=eval(display);
				document.getElementById("display").value =  Math.round(ams* 1000000) / 1000000 ;//文字を表示
				count=0;//文字数カウント
				display="";
				huragu="a";
				countC=0;//比較演算子間のカウント
			}
			
		});

		// 戻るボタン押下時の処理
		$("#button_back").on("click", function(){

			display=display.substring(0,count-1);//画面から一文字消す
		
			document.getElementById("display").value = display;//文字を表示(一文字消す)

			count-=1;//文字数カウント
			countC-=1;//比較演算子間のカウント

			huragu="a";

		});
		
		// クリアボタン押下時の処理
		$("#button_c").on("click", function(){
			
		});

		// オールクリアボタン押下時の処理
		$("#button_ac").on("click", function(){

			count=0;//文字数カウント
			countC=0;//比較演算子間のカウント
			display="";
			document.getElementById("display").value = display;//文字全消去
			huragu="b";

		});
		
	</script>
</body>

</html>